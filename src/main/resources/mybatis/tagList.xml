<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ddit.kixiv.tagList.mapper.TagListDao">
	
	<select id="getNextTagSeq" resultType="int">
	    SELECT IFNULL(MAX(tag_seq), 0) + 1 AS nextTagSeq FROM taglist
	</select>
	
	<insert id="tagListIns">
	    INSERT INTO taglist (tag_seq, tag_id, board_id)
	    VALUES (#{tag_seq}, #{tag_id}, #{board_id})
	</insert>
	
	<select id="tagData" resultType="kr.ddit.kixiv.tagList.vo.TagAllVo">
	    SELECT T.TAG_ID, T.TAG_SEQ, T.TAG_NAME, T.DEL_YN 
	    FROM (
	        SELECT a.TAG_ID, a.TAG_SEQ, b.TAG_NAME, b.DEL_YN, a.board_id 
	        FROM taglist a
	        JOIN tag b ON a.TAG_ID = b.TAG_ID
	    ) T
	    WHERE BOARD_ID = #{board_id};
	</select>
	
	<delete id="tagAllDel">
	    DELETE FROM taglist 
	    WHERE board_id = #{board_id};
	</delete>
	
	<delete id="deleteTag">
	    DELETE FROM taglist 
	    WHERE board_id = #{board_id};
	</delete>
</mapper>