<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ddit.kixiv.likey.mapper.LikeyDao">

	<select id="pictureSaveHeart" resultType="int">
		select COUNT(*) from LIKEY 
		where PIC_NUM = #{pic_num}
	</select>
	
	<insert id="heartUp">
	<!-- 좋아요 추가 -->
	    insert into likey
	    (like_seq, user_id, pic_num)
	    values((select NVL(MAX(like_seq),0) +1 from likey), #{user_id}, #{pic_num} )
	</insert>
	
	<delete id="heartDown">
		<!-- 좋아요 삭제 -->
	    delete from likey
	    where pic_num=#{pic_num} and user_id=#{user_id}
	</delete>
	
	<select id="LikeyList" resultType="kr.ddit.kixiv.likey.vo.LikeyVo">
		select * from likey 
		where pic_num = #{pic_num} and user_id = #{user_id}
	</select>
	
	<delete id="deleteLikey"> 
		 DELETE FROM LIKEY WHERE 
		 PIC_NUM = #{pic_num}
	</delete>
</mapper>