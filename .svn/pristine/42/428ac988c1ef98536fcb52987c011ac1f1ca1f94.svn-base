<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ddit.kixiv.follow.mapper.FollowDao">

<!-- 	<select id="pictureSaveHeart" resultType="int">
		select COUNT(*) from LIKEY 
		where PIC_NUM = #{pic_num} AND USER_ID = #{user_id}
	</select> -->
	
	<insert id="followIng">
	<!-- 팔로우 -->
	    insert into FOLLOWING
	    (FOLLOW_NUM, TO_ID, FROM_ID)
	    values((select NVL(MAX(FOLLOW_NUM),0) +1 from FOLLOWING), #{to_id}, #{from_id})
	</insert>
	
	<delete id="unFollowIng">
		<!-- 언팔로우 -->
	    delete from FOLLOWING
	    where TO_ID=#{to_id} and FROM_ID=#{from_id}
	</delete>
	
	<select id="followYn" resultType="integer">
		select COUNT(*) from FOLLOWING
		where TO_ID = #{to_id} and FROM_ID = #{from_id}
	</select>
	
	<select id="getFollowingList" resultType="map">
		SELECT F.FOLLOW_NUM "follow_num", F.TO_ID "to_id", F.FROM_ID "from_id", U.NICKNAME "nickname", U.PROFILE_IMG "profile_img"
		FROM FOLLOWING F, USERS U
		WHERE F.TO_ID = U.USER_ID
  		AND FROM_ID=#{user_id}
	</select>
	
</mapper>