<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ddit.kixiv.picboard.mapper.PicboardDao">

	<insert id="boardUp">
		INSERT INTO picboard
		(board_id, board_date, del_yn, user_id)
		VALUES((select NVL(MAX(board_id),0) +1 from picboard), SYSDATE, 'n' , #{user_id})
	</insert>
	
	<select id="boarditem" resultType="integer">
		select max(board_id) from picboard
	</select>
	
	<select id="item" resultType="kr.ddit.kixiv.picboard.vo.Picboard">
		SELECT T.*
		FROM
		(
		    SELECT borad_id, pic_view, regist_date, board_ment, userid, content, likey
		    FROM   picboard
		    WHERE userid = #{userid}
		    ORDER BY borad_id DESC
		) T
		WHERE ROWNUM = 1
		
	</select>
	
	<select id="list" resultType="kr.ddit.kixiv.picboard.vo.Picboard">
		select * from picboard
		order by borad_id desc
	</select>
	
	<select id="likelist" resultType="kr.ddit.kixiv.picboard.vo.Picboard">
		select * from picboard
		order by likey desc
	</select>
	
	<select id="checkUser" resultType="String">
		select user_id from picboard where board_id = #{board_id}
	</select>
	
	<delete id="deleteBoard">
		DELETE FROM PICBOARD 
		WHERE board_id = #{board_id}
	</delete>
	
	<delete id="deleteYnBoard">
		UPDATE PICBOARD
			SET
			DEL_YN = 'y'
		WHERE
		BOARD_ID = #{board_id}
	</delete>
	
	<update id="upcnt">
	    UPDATE PICBOARD
			SET
			LOOKCNT = LOOKCNT+1
		WHERE
		BOARD_ID = #{board_id}
	</update>
	
	<select id="countCnt" resultType="int">
		select LOOKCNT from PICBOARD where BOARD_ID = #{board_id}
	</select>
	
	<select id="myLookCnt" resultType="int">
        SELECT nvl(sum(LOOKCNT),0)
        FROM PICBOARD
        WHERE USER_ID = #{user_id}
	</select>
</mapper>